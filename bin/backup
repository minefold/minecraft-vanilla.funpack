#!/usr/bin/env ruby

# bin/backup
# outputs tar stream of backup

require 'find'

level_paths = []
Find.find('.') do |path|
  if path =~ /\/level\.dat$/
    level_paths << File.dirname(path)
  end
end

raise "level.dat not found" unless level_paths.any?

exec %Q{tar c #{level_paths.join(' ')} ./ops.txt ./server.properties ./white-list.txt ./banned-players.txt}
