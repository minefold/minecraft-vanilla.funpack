#!/usr/bin/env ruby

# usage: start <world_dir> <port> <ram_allocation>
# runs the server

world_dir, port, ram = ARGV
root = File.expand_path File.join __FILE__, '../..'

properties = File.read("#{world_dir}/server.properties")
File.write "#{world_dir}/server.properties", properties.gsub(/server-port=\d+/, "server-port=#{port}")

exec %Q{
  cd #{world_dir} && java -Xmx#{ram}M -Xms#{ram}M -jar server.jar nogui 2>&1
}
